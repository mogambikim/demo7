<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Hot-spot Hotspot Template - Index</title>
 <script src="https://cdn.tailwindcss.com"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/11.0.18/sweetalert2.all.min.js"></script>
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glider-js@1.7.7/glider.min.css" />
 <script src="https://cdn.jsdelivr.net/npm/glider-js@1.7.7/glider.min.js"></script>
 <link rel="preconnect" href="https://cdn.jsdelivr.net">
 <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
 <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body class="font-sans antialiased text-gray-900">
    <!-- Sticky Header -->
    <header class="bg-fuchsia-900 text-white fixed w-full z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-5">
            <div class="flex items-center justify-between h-16">
                <!-- Logo and title area -->
                <div class="flex items-center">
                    <img src="logo.png" alt="Your Company Logo" class="h-8 w-8 mr-2">
                    <h1 class="text-xl font-bold">Hot-spot</h1>
                </div>
                <!-- Navigation Links and Contact Number -->
                <div class="block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#alreadyHavePackage" class="text-fuchsia-200 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Already Paid? Click Here.</a>
                        <span class="text-fuchsia-200">0721176433</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Main content -->
    <main class="pt-24">
        <section class="bg-white">
            <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-extrabold text-gray-900 mb-6">We Provide Fast, Cheap and Reliable Wifi Connection Near You. Get connected today</h2>
                <!-- Pricing Section -->
                <div class="mt-10">
                    <div class="text-center">
                        <h3 class="text-2xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-3xl sm:leading-9">
                            CHECK OUR PRICING
                        </h3>
                        <p class="mt-4 max-w-2xl text-xl leading-7 text-gray-500 lg:mx-auto">
                            Choose the plan that fits your needs.
                        </p>
                    </div>
                </div>
            </div>
        </section>
    </main>
<div class="mt-10 max-w-7xl mx-auto grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-5">
    <div class="flex flex-col rounded-lg shadow-xl overflow-hidden transform transition duration-500 hover:scale-105">
        <div class="px-4 py-5 bg-gradient-to-tr from-pink-50 to-pink-200 text-center">
            <span class="inline-flex px-3 py-1 rounded-full text-xs font-semibold tracking-wide uppercase bg-pink-800 text-pink-50">
Test
            </span>
            <div class="mt-4 text-4xl leading-none font-extrabold text-pink-800">
                <span class="text-lg font-medium text-pink-600">GBP</span>
                <span id="package-amount">1</span>
            </div>
            <p class="mt-2 text-md leading-5 text-pink-700 text-center">
2 Mins Unlimited
            </p>
        </div>
        <div class="px-4 pt-4 pb-6 bg-pink-500 text-center">
            <a href="#" class="inline-block text-pink-800 bg-pink-50 hover:bg-pink-100 focus:outline-none focus:ring-4 focus:ring-pink-500 focus:ring-opacity-50 transform transition duration-150 ease-in-out rounded-lg font-semibold px-3 py-2 text-xs shadow-lg cursor-pointer"
               onclick="showPaymentForm('7', '3', 1); return false;">
                Click Here To Connect
            </a>
        </div>
    </div>
</div>
<div id="alreadyHavePackage" class="container mx-auto px-4">
    <div class="max-w-md mx-auto bg-white rounded-lg overflow-hidden md:max-w-lg">
        <div class="md:flex">
            <div class="w-full p-5">
                <div class="text-center">
                    <h3 class="text-2xl text-gray-900">Already Have an Active Package?</h3>
                </div>
                <form id="loginForm" class="form" name="login" action="$(link-login-only)" method="post" $(if chap-id)onSubmit="return doLogin()"$(endif)>
                    <input type="hidden" name="dst" value="$(link-orig)" />
                    <input type="hidden" name="popup" value="true" />
                    <div class="mb-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="username">Username</label>
                        <input id="usernameInput" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" name="username" type="text" value="" placeholder="Username">
                    </div>
                    <div class="mb-6">
                        <label class="block text-gray-700 text-sm font-bold mb-2" for="password">Password</label>
                        <input id="passwordInput" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" name="password" type="password" placeholder="******************">
                    </div>
                    <div class="flex items-center justify-between">
                        <button id="submitBtn" class="bg-fuchsia-500 hover:bg-fuchsia-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline" type="button">
                            Click Here To Connect
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="mt-10 text-center">
    <a href="https://demo.freeispradius.com/index.php?_route=login" class="bg-fuchsia-500 hover:bg-fuchsia-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
        Have a voucher code? Click here
    </a>
</div>
<!-- Add Arrows -->
<button aria-label="Previous" class="glider-prev">«</button>
<button aria-label="Next">»</button>
<div role="tablist" class="dots"></div>

<script>
    new Glider(document.querySelector('.glider'), {
        slidesToShow: 1,
        slidesToScroll: 1,
        draggable: true,
        dots: '.dots',
        arrows: {
            prev: '.glider-prev',
            next: '.glider-next'
        },
        responsive: [
            {
                breakpoint: 775,
                settings: {
                    slidesToShow: 2,
                    slidesToScroll: 2,
                }
            },
            {
                breakpoint: 1024,
                settings: {
                    slidesToShow: 3,
                    slidesToScroll: 3,
                }
            }
        ]
    });
</script>

<script>
function toggleFAQ(faqId) {
    var element = document.getElementById(faqId);
    if (element.style.display === "block") {
        element.style.display = "none";
    } else {
        element.style.display = "block";
    }
}
</script>
<form id="loginForm" class="form" name="login" action="$(link-login-only)" method="post" $(if chap-id)onSubmit="return doLogin()"$(endif)>
    <input type="hidden" name="dst" value="$(link-orig)" />
    <input type="hidden" name="popup" value="true" />
    <input type="hidden" name="mac" value="$(mac)" />
    <!-- Rest of the form code -->
</form>

<!-- Add a container to display the MAC address -->
<div id="macAddressContainer" class="mt-4">
    <p>Your MAC Address: <span id="macAddressDisplay"></span></p>
</div>

<!-- Add a script to retrieve and display the MAC address -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var macAddressInput = document.querySelector('input[name="mac"]');
        var macAddressDisplay = document.getElementById('macAddressDisplay');
        
        if (macAddressInput && macAddressDisplay) {
            var macAddress = macAddressInput.value;
            macAddressDisplay.textContent = macAddress;
        }
    });
</script>
<!-- Payment Form Section -->
<div id="payment-form-container" class="hidden fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-lg p-6 max-w-lg w-full">
        <h2 class="text-2xl mb-4">Enter Payment Details</h2>
        <p id="payment-amount" class="text-xl mb-4"></p> <!-- Add this line -->
        <form id="payment-form">
            <div id="payment-element" class="border p-2 rounded"></div>
            <div id="card-errors" role="alert" class="text-red-500 mt-2"></div>
            <button id="submit-payment" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4">Submit Payment</button>
        </form>
    </div>
</div>
<!-- Add the Stripe.js script -->
<script src="https://js.stripe.com/v3/"></script>
<script>
function showPaymentForm(planId, routerId, amount) {
    Swal.fire({
        title: 'Enter Your Phone Number',
        input: 'text',
        inputPlaceholder: 'Your phone number here',
        showCancelButton: true,
        confirmButtonText: 'Submit',
        preConfirm: (phoneNumber) => {
            var formattedPhoneNumber = phoneNumber.replace(/[^0-9]/g, '');
            var macAddress = document.querySelector('input[name="mac"]').value;
            var lastFourChars = macAddress.slice(-4);
            var username = formattedPhoneNumber + '-' + lastFourChars;
            localStorage.setItem('phoneNumber', formattedPhoneNumber);
            localStorage.setItem('lastFourChars', lastFourChars);
            document.getElementById('usernameInput').value = username;

            // Send data to create_stripe_user.php
            fetch('create_stripe_user.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    phone_number: formattedPhoneNumber,
                    plan_id: planId,
                    router_id: routerId,
                    mac_address: macAddress
                })
            });
            
            return formattedPhoneNumber;
        },
        allowOutsideClick: () => !Swal.isLoading()
    }).then((result) => {
        if (result.isConfirmed) {
            fetch('create_payment_intent.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    amount: amount * 100, // Amount in cents
                    phone_number: result.value // Include phone number
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    Swal.fire('Error', data.error, 'error');
                } else {
                    document.getElementById('payment-form-container').classList.remove('hidden');
                    document.getElementById('payment-amount').textContent = `Amount to be paid: GBP ${amount}`; // Add this line to show the amount

                    var stripe = Stripe('pk_test_51PbKmaRslRg4lJ4nTv67kPfdu1gT1OS4iO7KEi5PSqXE3kQduPcKYm61xYvXnRLnkjD5PwHOm6H5kcI45HQSHToB00uErWQ0hD');
                    var elements = stripe.elements({
                        clientSecret: data.clientSecret
                    });
                    var paymentElement = elements.create('payment');
                    paymentElement.mount('#payment-element');

                    document.getElementById('payment-form').addEventListener('submit', function(event) {
                        event.preventDefault();

                        stripe.confirmPayment({
                            elements,
                            confirmParams: {
                                return_url: 'https://demo.freeispradius.com/return.html', // Change this to your actual return URL
                            },
                        }).then(function(result) {
                            if (result.error) {
                                document.getElementById('card-errors').textContent = result.error.message;
                            }
                        });
                    });
                }
            });
        }
    });
}
</script>

</body>
</html>
